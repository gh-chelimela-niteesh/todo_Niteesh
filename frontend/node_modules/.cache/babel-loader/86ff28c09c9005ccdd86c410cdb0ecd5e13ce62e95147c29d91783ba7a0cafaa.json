{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cheli\\\\OneDrive\\\\Desktop\\\\Projects\\\\todo-frontend\\\\src\\\\components\\\\TodoApp.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport TodoForm from './TodoForm';\nimport TodoItem from './TodoItem';\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TodoApp() {\n  _s();\n  const [todos, setTodos] = useState([]);\n  const navigate = useNavigate();\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n\n  // ✅ Fetch todos for the current user\n  const fetchTodos = async () => {\n    try {\n      const res = await fetch(`http://localhost:8080/api/todos/user/${user.email}`);\n      const data = await res.json();\n      if (Array.isArray(data)) {\n        setTodos(data);\n      } else {\n        setTodos([]);\n      }\n    } catch (err) {\n      console.error(\"Failed to fetch todos:\", err);\n      setTodos([]);\n    }\n  };\n  useEffect(() => {\n    fetchTodos();\n  }, []);\n\n  // ✅ Add new todo\n  const addTodo = async task => {\n    try {\n      await fetch(\"http://localhost:8080/api/todos/add\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: user.email,\n          text: task.text,\n          priority: task.priority\n        })\n      });\n      fetchTodos();\n    } catch (err) {\n      console.error(\"Failed to add todo:\", err);\n    }\n  };\n\n  // ✅ Toggle completed\n  const toggleComplete = async id => {\n    try {\n      await fetch(`http://localhost:8080/api/todos/toggle/${id}`, {\n        method: \"PUT\"\n      });\n      fetchTodos();\n    } catch (err) {\n      console.error(\"Failed to toggle todo:\", err);\n    }\n  };\n\n  // ✅ Delete todo\n  const deleteTodo = async id => {\n    try {\n      await fetch(`http://localhost:8080/api/todos/delete/${id}`, {\n        method: \"DELETE\"\n      });\n      fetchTodos();\n    } catch (err) {\n      console.error(\"Failed to delete todo:\", err);\n    }\n  };\n\n  // ✅ Edit todo\n  const editTodo = async (id, updatedTask) => {\n    try {\n      await fetch(`http://localhost:8080/api/todos/edit/${id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          text: updatedTask.text,\n          priority: updatedTask.priority\n        })\n      });\n      fetchTodos();\n    } catch (err) {\n      console.error(\"Failed to edit todo:\", err);\n    }\n  };\n\n  // ✅ Logout\n  const handleLogout = () => {\n    localStorage.removeItem(\"user\");\n    navigate(\"/\");\n  };\n  const completedCount = todos.filter(t => t.completed).length;\n  const pendingCount = todos.length - completedCount;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-r from-slate-100 to-slate-200 flex flex-col items-center px-4 py-10\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-xl flex justify-end mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"px-4 py-2 bg-red-500 text-white rounded-lg shadow-md hover:bg-red-600 transition-all duration-200\",\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/30 backdrop-blur-lg rounded-2xl shadow-2xl w-full max-w-xl p-6 border border-slate-300\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-semibold text-slate-800 mb-6 text-center\",\n        children: \"\\uD83D\\uDE80 To Do List \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TodoForm, {\n        onSubmit: addTodo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: todos.map(todo => /*#__PURE__*/_jsxDEV(TodoItem, {\n          todo: todo,\n          onToggle: toggleComplete,\n          onDelete: deleteTodo,\n          onEdit: editTodo\n        }, todo.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 text-sm text-slate-700 flex justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83D\\uDCCB Total: \", todos.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u2705 Completed: \", completedCount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u23F3 Pending: \", pendingCount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n}\n_s(TodoApp, \"Gfdn2HvAQ76m6tHoGU1+G20rhRo=\", false, function () {\n  return [useNavigate];\n});\n_c = TodoApp;\nexport default TodoApp;\nvar _c;\n$RefreshReg$(_c, \"TodoApp\");","map":{"version":3,"names":["React","useState","useEffect","TodoForm","TodoItem","useNavigate","jsxDEV","_jsxDEV","TodoApp","_s","todos","setTodos","navigate","user","JSON","parse","localStorage","getItem","fetchTodos","res","fetch","email","data","json","Array","isArray","err","console","error","addTodo","task","method","headers","body","stringify","text","priority","toggleComplete","id","deleteTodo","editTodo","updatedTask","handleLogout","removeItem","completedCount","filter","t","completed","length","pendingCount","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","map","todo","onToggle","onDelete","onEdit","_c","$RefreshReg$"],"sources":["C:/Users/cheli/OneDrive/Desktop/Projects/todo-frontend/src/components/TodoApp.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport TodoForm from './TodoForm';\r\nimport TodoItem from './TodoItem';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction TodoApp() {\r\n  const [todos, setTodos] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n  // ✅ Fetch todos for the current user\r\n  const fetchTodos = async () => {\r\n    try {\r\n      const res = await fetch(`http://localhost:8080/api/todos/user/${user.email}`);\r\n      const data = await res.json();\r\n      if (Array.isArray(data)) {\r\n        setTodos(data);\r\n      } else {\r\n        setTodos([]);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch todos:\", err);\r\n      setTodos([]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTodos();\r\n  }, []);\r\n\r\n  // ✅ Add new todo\r\n  const addTodo = async (task) => {\r\n    try {\r\n      await fetch(\"http://localhost:8080/api/todos/add\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          email: user.email,\r\n          text: task.text,\r\n          priority: task.priority\r\n        }),\r\n      });\r\n      fetchTodos();\r\n    } catch (err) {\r\n      console.error(\"Failed to add todo:\", err);\r\n    }\r\n  };\r\n\r\n  // ✅ Toggle completed\r\n  const toggleComplete = async (id) => {\r\n    try {\r\n      await fetch(`http://localhost:8080/api/todos/toggle/${id}`, {\r\n        method: \"PUT\",\r\n      });\r\n      fetchTodos();\r\n    } catch (err) {\r\n      console.error(\"Failed to toggle todo:\", err);\r\n    }\r\n  };\r\n\r\n  // ✅ Delete todo\r\n  const deleteTodo = async (id) => {\r\n    try {\r\n      await fetch(`http://localhost:8080/api/todos/delete/${id}`, {\r\n        method: \"DELETE\",\r\n      });\r\n      fetchTodos();\r\n    } catch (err) {\r\n      console.error(\"Failed to delete todo:\", err);\r\n    }\r\n  };\r\n\r\n  // ✅ Edit todo\r\n  const editTodo = async (id, updatedTask) => {\r\n    try {\r\n      await fetch(`http://localhost:8080/api/todos/edit/${id}`, {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          text: updatedTask.text,\r\n          priority: updatedTask.priority,\r\n        }),\r\n      });\r\n      fetchTodos();\r\n    } catch (err) {\r\n      console.error(\"Failed to edit todo:\", err);\r\n    }\r\n  };\r\n\r\n  // ✅ Logout\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"user\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const completedCount = todos.filter((t) => t.completed).length;\r\n  const pendingCount = todos.length - completedCount;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-r from-slate-100 to-slate-200 flex flex-col items-center px-4 py-10\">\r\n\r\n      {/* 🔓 Logout Button */}\r\n      <div className=\"w-full max-w-xl flex justify-end mb-4\">\r\n        <button\r\n          onClick={handleLogout}\r\n          className=\"px-4 py-2 bg-red-500 text-white rounded-lg shadow-md hover:bg-red-600 transition-all duration-200\"\r\n        >\r\n          Logout\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"bg-white/30 backdrop-blur-lg rounded-2xl shadow-2xl w-full max-w-xl p-6 border border-slate-300\">\r\n        <h1 className=\"text-3xl font-semibold text-slate-800 mb-6 text-center\">🚀 To Do List </h1>\r\n        <TodoForm onSubmit={addTodo} />\r\n        <div className=\"space-y-4\">\r\n          {todos.map((todo) => (\r\n            <TodoItem\r\n              key={todo.id}\r\n              todo={todo}\r\n              onToggle={toggleComplete}\r\n              onDelete={deleteTodo}\r\n              onEdit={editTodo}\r\n            />\r\n          ))}\r\n        </div>\r\n        <div className=\"mt-6 text-sm text-slate-700 flex justify-between\">\r\n          <span>📋 Total: {todos.length}</span>\r\n          <span>✅ Completed: {completedCount}</span>\r\n          <span>⏳ Pending: {pendingCount}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TodoApp;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}